from ariadne import make_executable_schema, load_schema_from_path
from .base_factory import build_crud_resolvers

{{ model_import_line }}

def mount_catalog_schema():
    query, mutation, _node = build_crud_resolvers(
        type_name="{{ Entity }}",
        model=Model,
        list_field="{{ entities_field }}",
        single_field="{{ entity_field }}",
        create_field="{{ create_field }}",
        update_field="{{ update_field }}",
        delete_field="{{ delete_field }}",
        searchable_cols=[{% if code_field %}Model.{{ code_field }}, {% endif %}Model.name],
        unique_checks=[{% if code_field %}Model.{{ code_field }}, {% endif %}]
    )
    type_defs = load_schema_from_path("{{ sdl_path }}")
    schema = make_executable_schema(type_defs, query, mutation)
    return schema
